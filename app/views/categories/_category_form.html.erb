<%= form_for @category do |f| %>

    <% if @category.errors.any? %>
        <div class="error_messages">
          <h3>Error Occured</h3>
          <ul>
            <% for message in @category.errors.full_messages %>
                <li><%= message %></li>
            <% end %>
          </ul>
        </div>
    <% end %>

    <p>
      <%= f.label :name %>
      <%= f.text_field :name %>
    </p>

    <p>
      <%= f.label :parent_category_id %>
      <%= f.collection_select(:parent_category_id, Category.select{|c| c.parent_category.nil? && c.name != @category.name}, :id, :name, prompt: "Select Category") %>
    </p>

    <p>
      <%= f.submit %>
    </p>
<% end %>